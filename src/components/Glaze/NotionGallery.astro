---
import type { NotionPage } from "../../types/notion";
import config from "../../../site.config.mjs";

interface Props {
  posts: NotionPage[];
}

const { posts } = Astro.props;
---

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
  {posts.map((post: NotionPage) => (
    <article class="group bg-white dark:bg-slate-900 rounded-xl overflow-hidden border border-slate-200 dark:border-slate-800 hover:shadow-md transition-all duration-200 flex flex-col h-full">
      
      <a href={`/post/${post.slug}`} class="block overflow-hidden aspect-[1.7] relative bg-slate-100 dark:bg-slate-800 border-b border-slate-100 dark:border-slate-800">
         {post.cover ? (
            <img src={post.cover} alt={post.title} class="w-full h-full object-cover" />
         ) : (
            <div class="w-full h-full flex items-center justify-center opacity-40">
                <span class="text-5xl">ðŸ“„</span>
            </div>
         )}
      </a>

      <div class="p-4 flex flex-col flex-1">
        <h2 class="text-base font-semibold text-slate-900 dark:text-slate-100 mb-2 leading-snug group-hover:underline decoration-slate-400 underline-offset-4 decoration-1">
          <a href={`/post/${post.slug}`}>
            {post.title}
          </a>
        </h2>

        {post.description && (
          <p class="text-slate-500 dark:text-slate-400 text-xs line-clamp-2 mb-3">
            {post.description}
          </p>
        )}
        
        <div class="mt-auto flex items-center justify-between pt-2">
          <time datetime={post.publishedAt} class="text-[10px] uppercase tracking-wider font-medium text-slate-400 dark:text-slate-500">
            {new Date(post.publishedAt).toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' })}
          </time>
          <div class="flex gap-1">
            {post.tags?.slice(0, 1).map((tag: string) => (
              <span class="text-[10px] font-medium px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 rounded">
                {tag}
              </span>
            ))}
          </div>
        </div>
      </div>
    </article>
  ))}
</div>
