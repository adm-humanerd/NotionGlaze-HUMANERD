---
import RichText from "../RichText.astro";
import NotionRenderer from "../NotionRenderer.astro";
import { slugify } from "../../../utils/slugify";

const { block } = Astro.props;
const { type } = block;
const value = block[type];

const Tag = type === "heading_1" ? "h1" : type === "heading_2" ? "h2" : "h3";
const classes = {
  heading_1:
    "text-[1.875em] font-semibold leading-[1.3] mt-[2em] mb-[4px] text-notion-text-default",
  heading_2:
    "text-[1.5em] font-semibold leading-[1.3] mt-[1.4em] mb-[1px] text-notion-text-default",
  heading_3:
    "text-[1.25em] font-semibold leading-[1.3] mt-[1em] mb-[1px] text-notion-text-default",
};
---

<Tag
  class={classes[type as keyof typeof classes]}
  id={slugify(value.rich_text?.[0]?.plain_text || "")}
>
  <div class="py-[3px] min-h-[1.5em] flex items-center">
    <RichText richText={value.rich_text} />
  </div>
</Tag>
{
  block.children && (
    <div class="ml-6 mt-2">
      <NotionRenderer blocks={block.children} />
    </div>
  )
}
