---
import RichText from "../RichText.astro";
import NotionRenderer from "../NotionRenderer.astro";

const { block } = Astro.props;
const { paragraph } = block;

const getColorClass = (color: string) => {
  if (!color || color === "default") return "";
  if (color.endsWith("_background")) {
    return `bg-notion-bg-${color.replace("_background", "")} px-2 py-1 rounded-sm`;
  }
  return `text-notion-text-${color}`;
};

const colorClass = getColorClass(paragraph.color);
---

<div
  class={`max-w-full text-notion-text-default leading-notion py-[3px] min-h-[1.5em] ${colorClass}`}
>
  <p class="whitespace-pre-wrap break-words">
    <RichText richText={paragraph.rich_text} />
  </p>
  {
    block.children && (
      <div class="mt-1">
        <NotionRenderer blocks={block.children} />
      </div>
    )
  }
</div>
